{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { getUserClocks } from \"../../http/api\";\nimport ClockInOutListItem from \"../ClockInOutListItem\";\nimport { useSelector } from 'react-redux';\nimport { Button } from 'react-native-paper';\nimport { ApplicationDate } from \"../../date/index\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar History = function History() {\n  var currentUser = useSelector(function (state) {\n    return state.currentUser.value;\n  });\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    clocks = _React$useState2[0],\n    setClocks = _React$useState2[1];\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    displayedClocks = _React$useState4[0],\n    setDisplayedClocks = _React$useState4[1];\n  var _React$useState5 = React.useState(true),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    selectedFilter = _React$useState6[0],\n    setSelectedFilter = _React$useState6[1];\n  React.useEffect(function () {\n    var _displayedClocks = clocks.filter(function (clock) {\n      return clock.status === selectedFilter;\n    });\n    setDisplayedClocks(_displayedClocks);\n  }, [clocks, selectedFilter]);\n  React.useEffect(function () {\n    if (currentUser) {\n      getUserClocks(currentUser.token, currentUser.user.id).then(function (userClocks) {\n        return setClocks(userClocks.data);\n      });\n    }\n  }, [currentUser]);\n  var renderClock = function renderClock(_ref) {\n    var clock = _ref.item;\n    return _jsx(ClockInOutListItem, {\n      title: ApplicationDate.format(clock.time),\n      description: \"\"\n    }, clock.id);\n  };\n  return _jsx(_Fragment, {\n    children: _jsxs(ScrollView, {\n      children: [_jsxs(View, {\n        style: styles.filterContainer,\n        children: [_jsx(Button, {\n          color: \"primary\",\n          style: {\n            marginRight: 8\n          },\n          mode: selectedFilter ? \"contained\" : \"outlined\",\n          onPress: function onPress() {\n            return setSelectedFilter(true);\n          },\n          children: \"arrival\"\n        }), _jsx(Button, {\n          style: {\n            marginRight: 8\n          },\n          mode: selectedFilter ? \"outlined\" : \"contained\",\n          onPress: function onPress() {\n            return setSelectedFilter(false);\n          },\n          children: \"departure\"\n        })]\n      }), _jsx(ScrollView, {\n        style: styles.clocksListContainer,\n        children: _jsx(FlatList, {\n          data: displayedClocks,\n          renderItem: renderClock,\n          keyExtractor: function keyExtractor(item) {\n            return item.id;\n          }\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  clocksListContainer: {},\n  filterContainer: {\n    alignItems: \"center\",\n    justifyContent: \"start\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    marginBottom: 24\n  }\n});\nexport default History;","map":{"version":3,"names":["React","getUserClocks","ClockInOutListItem","useSelector","Button","ApplicationDate","History","currentUser","state","value","useState","clocks","setClocks","displayedClocks","setDisplayedClocks","selectedFilter","setSelectedFilter","useEffect","_displayedClocks","filter","clock","status","token","user","id","then","userClocks","data","renderClock","item","format","time","styles","filterContainer","marginRight","clocksListContainer","StyleSheet","create","alignItems","justifyContent","display","flexDirection","marginBottom"],"sources":["/Users/antoine/Documents/EPITECH/time-manager-/mobile/components/History/index.js"],"sourcesContent":["import * as React from 'react';\nimport { View, StyleSheet, FlatList, ScrollView } from 'react-native';\nimport { getUserClocks } from '../../http/api';\nimport ClockInOutListItem from '../ClockInOutListItem';\nimport { useSelector } from 'react-redux';\nimport { Button } from 'react-native-paper';\nimport { ApplicationDate } from '../../date/index';\n\nconst History = () => {\n\n    const currentUser = useSelector((state) => state.currentUser.value)\n    const [clocks, setClocks] = React.useState([])\n    const [displayedClocks, setDisplayedClocks] = React.useState([])\n    const [selectedFilter, setSelectedFilter] = React.useState(true)\n\n    React.useEffect(() => {\n        const _displayedClocks = clocks.filter((clock) => clock.status === selectedFilter)\n        setDisplayedClocks(_displayedClocks)\n    }, [clocks, selectedFilter])\n    React.useEffect(() => {\n        if (currentUser) {\n            getUserClocks(currentUser.token, currentUser.user.id).then((userClocks) => setClocks(userClocks.data))\n        }\n    }, [currentUser])\n\n    const renderClock = ({ item: clock }) => {\n        return <ClockInOutListItem key={clock.id} title={ApplicationDate.format(clock.time)} description={\"\"} />\n    }\n\n    return (\n        <>\n            <ScrollView>\n                <View style={styles.filterContainer}>\n                    <Button color={\"primary\"} style={{ marginRight: 8 }} mode={selectedFilter ? \"contained\" : \"outlined\"} onPress={() => setSelectedFilter(true)}>\n                        arrival\n                    </Button>\n                    <Button style={{ marginRight: 8 }} mode={selectedFilter ? \"outlined\" : \"contained\"} onPress={() => setSelectedFilter(false)}>\n                        departure\n                    </Button>\n                </View>\n                <ScrollView style={styles.clocksListContainer}>\n                    <FlatList\n                        data={displayedClocks}\n                        renderItem={renderClock}\n                        keyExtractor={item => item.id}\n                    />\n                </ScrollView>\n            </ScrollView>\n        </>\n\n    )\n}\n\nconst styles = StyleSheet.create({\n    clocksListContainer: {\n\n    },\n    filterContainer: {\n        alignItems: \"center\",\n        justifyContent: \"start\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        marginBottom: 24\n    }\n})\n\nexport default History"],"mappings":"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"},"metadata":{},"sourceType":"module"}