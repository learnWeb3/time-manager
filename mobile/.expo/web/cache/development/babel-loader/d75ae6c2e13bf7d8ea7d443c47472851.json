{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"axios\";\nimport { env } from \"../env/index\";\nimport { setCurrentUser } from \"../stores/reducers/currentUserReducer\";\nimport { LocalStorage } from \"../localstorage/index\";\nvar httpApi = axios.create({\n  baseURL: env.API_BASE_URL,\n  timeout: 1000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nhttpApi.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error && error.response.status === 401) {\n    LocalStorage.removeData(env.LOCAL_STORAGE_CURRENT_USER_KEY).then(function () {\n      return setCurrentUser(null);\n    });\n  }\n  return Promise.reject(error);\n});\nvar mergeAuthHeaders = function mergeAuthHeaders(axiosInstance, token) {\n  axiosInstance.defaults.headers.common['Authorization'] = \"Bearer \" + token;\n  return axiosInstance;\n};\nexport var login = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      email: \"\",\n      password: \"\"\n    };\n    return yield httpApi.post('/sessions/login', data).then(function (response) {\n      return response.data;\n    });\n  });\n  return function login() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getProfileInformations = function () {\n  var _ref2 = _asyncToGenerator(function* (token, userId) {\n    return mergeAuthHeaders(httpApi, token).get(\"/users/\" + userId).then(function (response) {\n      return response.data;\n    });\n  });\n  return function getProfileInformations(_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getSchedules = function () {\n  var _ref3 = _asyncToGenerator(function* (token) {\n    return mergeAuthHeaders(httpApi, token).get(\"/schedules\").then(function (response) {\n      return response.data;\n    });\n  });\n  return function getSchedules(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getWorkingTimes = function () {\n  var _ref4 = _asyncToGenerator(function* (token, userId) {\n    return mergeAuthHeaders(httpApi, token).get(\"/workingtimes/\" + userId).then(function (response) {\n      return response.data;\n    });\n  });\n  return function getWorkingTimes(_x4, _x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var createWorkingTime = function createWorkingTime(token, userId) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    \"schedule_id\": null\n  };\n  return mergeAuthHeaders(httpApi, token).post(\"/workingtimes/\" + userId, {\n    working_time: data\n  }).then(function (response) {\n    return response.data;\n  });\n};\nexport var deleteWorkingTime = function deleteWorkingTime(token, workingtimeId) {\n  return mergeAuthHeaders(httpApi, token).delete(\"/workingtimes/\" + workingtimeId).then(function (response) {\n    return response.data;\n  });\n};\nexport var updateProfileInformations = function () {\n  var _ref5 = _asyncToGenerator(function* (token, userId) {\n    var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      email: \"\",\n      jobtitle: \"\",\n      username: \"\"\n    };\n    return yield mergeAuthHeaders(httpApi, token).put(\"/users/\" + userId, {\n      user: data\n    }).then(function (response) {\n      return response.data;\n    });\n  });\n  return function updateProfileInformations(_x6, _x7) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var getUserStatus = function getUserStatus(token, userId) {\n  return mergeAuthHeaders(httpApi, token).get(\"/status/\" + userId).then(function (response) {\n    return response.data;\n  });\n};\nexport var createClock = function createClock(token, userId) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    clock: {\n      time: Math.round(Date.now() / 1000)\n    }\n  };\n  return mergeAuthHeaders(httpApi, token).post(\"/clocks/\" + userId, data).then(function (response) {\n    return response.data;\n  });\n};\nexport var getUserClocks = function getUserClocks(token, userId) {\n  return mergeAuthHeaders(httpApi, token).get(\"/clocks/\" + userId).then(function (response) {\n    return response.data;\n  });\n};\nexport var getUserPresences = function getUserPresences(token, userId) {\n  var periodicity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"day\";\n  return mergeAuthHeaders(httpApi, token).get(\"/clocks/presence?userId=\" + userId + \"&periodicity=\" + periodicity).then(function (response) {\n    return response.data;\n  });\n};","map":{"version":3,"names":["axios","env","setCurrentUser","LocalStorage","httpApi","create","baseURL","API_BASE_URL","timeout","headers","interceptors","response","use","error","status","removeData","LOCAL_STORAGE_CURRENT_USER_KEY","then","Promise","reject","mergeAuthHeaders","axiosInstance","token","defaults","common","login","data","email","password","post","getProfileInformations","userId","get","getSchedules","getWorkingTimes","createWorkingTime","working_time","deleteWorkingTime","workingtimeId","delete","updateProfileInformations","jobtitle","username","put","user","getUserStatus","createClock","clock","time","Math","round","Date","now","getUserClocks","getUserPresences","periodicity"],"sources":["C:/Users/lahce/Desktop/epitech2023/pool/time-manager-/mobile/http/api.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { env } from '../env/index';\r\nimport { setCurrentUser } from \"../stores/reducers/currentUserReducer\";\r\nimport { LocalStorage } from '../localstorage/index';\r\n\r\nconst httpApi = axios.create({\r\n    baseURL: env.API_BASE_URL,\r\n    timeout: 1000,\r\n    headers: { 'Content-Type': 'application/json' }\r\n});\r\n\r\nhttpApi.interceptors.response.use(function (response) {\r\n    return response;\r\n}, function (error) {\r\n    if (error &&error.response.status === 401) {\r\n        LocalStorage.removeData(env.LOCAL_STORAGE_CURRENT_USER_KEY)\r\n            .then(() => setCurrentUser(null))\r\n    }\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nconst mergeAuthHeaders = (axiosInstance, token) => {\r\n    axiosInstance.defaults.headers.common['Authorization'] = `Bearer ${token}`\r\n    return axiosInstance\r\n}\r\n\r\nexport const login = async (data = { email: \"\", password: \"\" }) => {\r\n    return await httpApi.post('/sessions/login', data).then((response) => response.data)\r\n}\r\n\r\nexport const getProfileInformations = async (token, userId) => {\r\n    return mergeAuthHeaders(httpApi, token).get(`/users/${userId}`)\r\n        .then((response) => response.data)\r\n}\r\n\r\nexport const getSchedules = async (token) => {\r\n    return mergeAuthHeaders(httpApi, token).get(`/schedules`)\r\n        .then((response) => response.data)\r\n}\r\n\r\nexport const getWorkingTimes = async (token, userId) => {\r\n    return mergeAuthHeaders(httpApi, token).get(`/workingtimes/${userId}`)\r\n        .then((response) => response.data)\r\n}\r\n\r\nexport const createWorkingTime = (token, userId, data = {\r\n    \"schedule_id\": null\r\n}) => mergeAuthHeaders(httpApi, token)\r\n    .post(`/workingtimes/${userId}`, {\r\n        working_time: data\r\n    })\r\n    .then((response) => response.data)\r\n\r\nexport const deleteWorkingTime = (token, workingtimeId) => mergeAuthHeaders(httpApi, token)\r\n    .delete(`/workingtimes/${workingtimeId}`)\r\n    .then((response) => response.data)\r\n\r\nexport const updateProfileInformations = async (token, userId, data = {\r\n    email: \"\",\r\n    jobtitle: \"\",\r\n    username: \"\"\r\n}) => {\r\n\r\n    return await mergeAuthHeaders(httpApi, token).put(`/users/${userId}`, {\r\n        user: data\r\n    }).then((response) => response.data)\r\n}\r\n\r\nexport const getUserStatus = (token, userId) => mergeAuthHeaders(httpApi, token)\r\n    .get(`/status/${userId}`,)\r\n    .then((response) => response.data)\r\n\r\nexport const createClock = (token, userId, data = {\r\n    clock: {\r\n        time: Math.round(Date.now() / 1000)\r\n    }\r\n}) => mergeAuthHeaders(httpApi, token)\r\n    .post(`/clocks/${userId}`, data)\r\n    .then((response) => response.data)\r\n\r\nexport const getUserClocks = (token, userId) => mergeAuthHeaders(httpApi, token)\r\n    .get(`/clocks/${userId}`)\r\n    .then((response) => response.data)\r\n\r\nexport const getUserPresences = (token, userId, periodicity = \"day\") => mergeAuthHeaders(httpApi, token)\r\n    .get(`/clocks/presence?userId=${userId}&periodicity=${periodicity}`)\r\n    .then((response) => response.data)"],"mappings":"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"},"metadata":{},"sourceType":"module"}