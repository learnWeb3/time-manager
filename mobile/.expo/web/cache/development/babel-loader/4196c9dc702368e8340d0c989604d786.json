{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Timetable = function Timetable() {\n  var schedules = useSelector(function (state) {\n    return state.schedules.value;\n  });\n  var workingtimes = useSelector(function (state) {\n    return state.workingtimes.value;\n  });\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    formattedSchedules = _React$useState2[0],\n    setFormattedSchedules = _React$useState2[1];\n  var formatSchedules = function formatSchedules(schedules, workingtimes) {\n    var workingtimesbyschedules = workingtimes.reduce(function (mappingObject, workingtime) {\n      if (mappingObject[workingtime.schedule_id]) {\n        mappingObject[workingtime.schedule_id] = [].concat(_toConsumableArray(mappingObject[workingtime.schedule_id]), [workingtime]);\n      } else {\n        mappingObject[workingtime.schedule_id] = [workingtime];\n      }\n    }, {});\n    return schedules.map(function (schedule) {\n      return _objectSpread(_objectSpread({}, schedule), {}, {\n        userIsSubscribed: workingtimesbyschedules[schedule.id] ? true : false\n      });\n    });\n  };\n  React.useEffect(function () {\n    if (schedules && workingtimes) {\n      setFormattedSchedules(formatSchedules(schedules, workingtimes));\n    }\n  }, [schedules, workingtimes]);\n  var renderFormattedSchedule = function renderFormattedSchedule(_ref) {\n    var schedule = _ref.item;\n    return _jsx(ClockInOutListItem, {\n      title: ApplicationDate.format(schedule.time),\n      description: \"\"\n    }, schedule.id);\n  };\n  return _jsx(ScrollView, {\n    style: styles.schedulesListContainer,\n    children: _jsx(FlatList, {\n      data: formattedSchedules,\n      renderItem: renderFormattedSchedule,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      }\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  schedulesListContainer: {\n    height: \"100%\"\n  },\n  filterContainer: {\n    alignItems: \"center\",\n    justifyContent: \"start\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    marginTop: 16,\n    marginBottom: 16,\n    marginLeft: 16\n  }\n});\nexport default Timetable;","map":{"version":3,"names":["React","useSelector","Timetable","schedules","state","value","workingtimes","useState","formattedSchedules","setFormattedSchedules","formatSchedules","workingtimesbyschedules","reduce","mappingObject","workingtime","schedule_id","map","schedule","userIsSubscribed","id","useEffect","renderFormattedSchedule","item","ApplicationDate","format","time","styles","schedulesListContainer","StyleSheet","create","height","filterContainer","alignItems","justifyContent","display","flexDirection","marginTop","marginBottom","marginLeft"],"sources":["/Users/antoine/Documents/EPITECH/time-manager-/mobile/components/Timetable/index.js"],"sourcesContent":["import * as React from 'react';\nimport { useSelector } from 'react-redux';\nimport { ScrollView, FlatList } from 'react-native';\n\nconst Timetable = () => {\n    const schedules = useSelector((state) => state.schedules.value);\n    const workingtimes = useSelector((state) => state.workingtimes.value)\n    const [formattedSchedules, setFormattedSchedules] = React.useState([])\n\n    const formatSchedules = (schedules, workingtimes) => {\n        const workingtimesbyschedules = workingtimes.reduce((mappingObject, workingtime) => {\n            if (mappingObject[workingtime.schedule_id]) {\n                mappingObject[workingtime.schedule_id] = [\n                    ...mappingObject[workingtime.schedule_id], workingtime\n                ]\n            } else {\n                mappingObject[workingtime.schedule_id] = [\n                    workingtime\n                ]\n            }\n        }, {})\n        return schedules.map((schedule) => ({\n            ...schedule,\n            userIsSubscribed: workingtimesbyschedules[schedule.id] ? true : false\n        }))\n    }\n\n    React.useEffect(() => {\n        if (schedules && workingtimes) {\n            setFormattedSchedules(\n                formatSchedules(schedules, workingtimes)\n            )\n        }\n    }, [schedules, workingtimes])\n\n    const renderFormattedSchedule = ({ item: schedule }) => {\n        return <ClockInOutListItem key={schedule.id} title={ApplicationDate.format(schedule.time)} description={\"\"} />\n    }\n    return (\n        <ScrollView style={styles.schedulesListContainer}>\n            <FlatList\n                data={formattedSchedules}\n                renderItem={renderFormattedSchedule}\n                keyExtractor={item => item.id}\n            />\n        </ScrollView>\n    )\n}\n\nconst styles = StyleSheet.create({\n    schedulesListContainer: {\n        height: \"100%\"\n    },\n    filterContainer: {\n        alignItems: \"center\",\n        justifyContent: \"start\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        marginTop: 16,\n        marginBottom: 16,\n        marginLeft: 16\n    }\n})\n\n\nexport default Timetable"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,WAAW,QAAQ,aAAa;AAAC;AAAA;AAAA;AAG1C,IAAMC,SAAS,GAAG,SAAZA,SAAS,GAAS;EACpB,IAAMC,SAAS,GAAGF,WAAW,CAAC,UAACG,KAAK;IAAA,OAAKA,KAAK,CAACD,SAAS,CAACE,KAAK;EAAA,EAAC;EAC/D,IAAMC,YAAY,GAAGL,WAAW,CAAC,UAACG,KAAK;IAAA,OAAKA,KAAK,CAACE,YAAY,CAACD,KAAK;EAAA,EAAC;EACrE,sBAAoDL,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/DC,kBAAkB;IAAEC,qBAAqB;EAEhD,IAAMC,eAAe,GAAG,SAAlBA,eAAe,CAAIP,SAAS,EAAEG,YAAY,EAAK;IACjD,IAAMK,uBAAuB,GAAGL,YAAY,CAACM,MAAM,CAAC,UAACC,aAAa,EAAEC,WAAW,EAAK;MAChF,IAAID,aAAa,CAACC,WAAW,CAACC,WAAW,CAAC,EAAE;QACxCF,aAAa,CAACC,WAAW,CAACC,WAAW,CAAC,gCAC/BF,aAAa,CAACC,WAAW,CAACC,WAAW,CAAC,IAAED,WAAW,EACzD;MACL,CAAC,MAAM;QACHD,aAAa,CAACC,WAAW,CAACC,WAAW,CAAC,GAAG,CACrCD,WAAW,CACd;MACL;IACJ,CAAC,EAAE,CAAC,CAAC,CAAC;IACN,OAAOX,SAAS,CAACa,GAAG,CAAC,UAACC,QAAQ;MAAA,uCACvBA,QAAQ;QACXC,gBAAgB,EAAEP,uBAAuB,CAACM,QAAQ,CAACE,EAAE,CAAC,GAAG,IAAI,GAAG;MAAK;IAAA,CACvE,CAAC;EACP,CAAC;EAEDnB,KAAK,CAACoB,SAAS,CAAC,YAAM;IAClB,IAAIjB,SAAS,IAAIG,YAAY,EAAE;MAC3BG,qBAAqB,CACjBC,eAAe,CAACP,SAAS,EAAEG,YAAY,CAAC,CAC3C;IACL;EACJ,CAAC,EAAE,CAACH,SAAS,EAAEG,YAAY,CAAC,CAAC;EAE7B,IAAMe,uBAAuB,GAAG,SAA1BA,uBAAuB,OAA2B;IAAA,IAAfJ,QAAQ,QAAdK,IAAI;IACnC,OAAO,KAAC,kBAAkB;MAAmB,KAAK,EAAEC,eAAe,CAACC,MAAM,CAACP,QAAQ,CAACQ,IAAI,CAAE;MAAC,WAAW,EAAE;IAAG,GAA3ER,QAAQ,CAACE,EAAE,CAAmE;EAClH,CAAC;EACD,OACI,KAAC,UAAU;IAAC,KAAK,EAAEO,MAAM,CAACC,sBAAuB;IAAA,UAC7C,KAAC,QAAQ;MACL,IAAI,EAAEnB,kBAAmB;MACzB,UAAU,EAAEa,uBAAwB;MACpC,YAAY,EAAE,sBAAAC,IAAI;QAAA,OAAIA,IAAI,CAACH,EAAE;MAAA;IAAC;EAChC,EACO;AAErB,CAAC;AAED,IAAMO,MAAM,GAAGE,UAAU,CAACC,MAAM,CAAC;EAC7BF,sBAAsB,EAAE;IACpBG,MAAM,EAAE;EACZ,CAAC;EACDC,eAAe,EAAE;IACbC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE,OAAO;IACvBC,OAAO,EAAE,MAAM;IACfC,aAAa,EAAE,KAAK;IACpBC,SAAS,EAAE,EAAE;IACbC,YAAY,EAAE,EAAE;IAChBC,UAAU,EAAE;EAChB;AACJ,CAAC,CAAC;AAGF,eAAepC,SAAS"},"metadata":{},"sourceType":"module"}