{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport * as React from 'react';\nimport { useSelector } from 'react-redux';\nexport var useSchedulesWorkingTimesSum = function useSchedulesWorkingTimesSum() {\n  var schedules = useSelector(function (state) {\n    return state.schedules.value;\n  });\n  var workingtimes = useSelector(function (state) {\n    return state.workingtimes.value;\n  });\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    formattedSchedules = _React$useState2[0],\n    setFormattedSchedules = _React$useState2[1];\n  var formatSchedules = function formatSchedules(schedules, workingtimes) {\n    var workingtimesbyschedules = workingtimes.reduce(function (mappingObject, workingtime) {\n      mappingObject[workingtime.schedule_id] = workingtime;\n      return mappingObject;\n    }, {});\n    return schedules.map(function (schedule) {\n      return _objectSpread(_objectSpread({}, schedule), {}, {\n        workingtime: workingtimesbyschedules[schedule.id]\n      });\n    });\n  };\n  var calculateWorkingTimeSum = function calculateWorkingTimeSum(scheduleWithWorkingTimes) {\n    return scheduleWithWorkingTimes.reduce(function (sum, schedule) {\n      if (schedule.workingtime) {\n        var shiftDuration = schedule.endhour + schedule.endminute / 60 - (schedule.starthour + schedule.startminute / 60);\n        return sum + shiftDuration;\n      }\n      return sum;\n    }, 0);\n  };\n  React.useEffect(function () {\n    if (schedules && workingtimes) {\n      setFormattedSchedules(formatSchedules(schedules, workingtimes));\n    }\n  }, [schedules, workingtimes]);\n  return {\n    sum: formattedSchedules ? calculateWorkingTimeSum(formattedSchedules) : 0\n  };\n};","map":{"version":3,"names":["React","useSelector","useSchedulesWorkingTimesSum","schedules","state","value","workingtimes","useState","formattedSchedules","setFormattedSchedules","formatSchedules","workingtimesbyschedules","reduce","mappingObject","workingtime","schedule_id","map","schedule","id","calculateWorkingTimeSum","scheduleWithWorkingTimes","sum","shiftDuration","endhour","endminute","starthour","startminute","useEffect"],"sources":["C:/Users/lahce/Desktop/epitech2023/pool/time-manager-/mobile/hooks/schedulesWorkingTimeSum.js"],"sourcesContent":["import * as React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport const useSchedulesWorkingTimesSum = () => {\r\n\r\n    const schedules = useSelector((state) => state.schedules.value);\r\n    const workingtimes = useSelector((state) => state.workingtimes.value)\r\n    const [formattedSchedules, setFormattedSchedules] = React.useState([])\r\n\r\n    const formatSchedules = (schedules, workingtimes) => {\r\n        const workingtimesbyschedules = workingtimes.reduce((mappingObject, workingtime) => {\r\n            mappingObject[workingtime.schedule_id] = workingtime;\r\n            return mappingObject\r\n        }, {})\r\n        return schedules.map((schedule) => ({\r\n            ...schedule,\r\n            workingtime: workingtimesbyschedules[schedule.id],\r\n        }))\r\n    }\r\n\r\n    const calculateWorkingTimeSum = (scheduleWithWorkingTimes) => {\r\n        return scheduleWithWorkingTimes.reduce((sum, schedule) => {\r\n            if (schedule.workingtime) {\r\n                const shiftDuration = (schedule.endhour + (schedule.endminute / 60)) - (schedule.starthour + (schedule.startminute / 60))\r\n                return sum + shiftDuration\r\n            }\r\n            return sum\r\n        }, 0)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (schedules && workingtimes) {\r\n            setFormattedSchedules(\r\n                formatSchedules(schedules, workingtimes)\r\n            )\r\n        }\r\n    }, [schedules, workingtimes])\r\n\r\n    return { sum: formattedSchedules ? calculateWorkingTimeSum(formattedSchedules) : 0 }\r\n}"],"mappings":";;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,WAAW,QAAQ,aAAa;AAEzC,OAAO,IAAMC,2BAA2B,GAAG,SAA9BA,2BAA2B,GAAS;EAE7C,IAAMC,SAAS,GAAGF,WAAW,CAAC,UAACG,KAAK;IAAA,OAAKA,KAAK,CAACD,SAAS,CAACE,KAAK;EAAA,EAAC;EAC/D,IAAMC,YAAY,GAAGL,WAAW,CAAC,UAACG,KAAK;IAAA,OAAKA,KAAK,CAACE,YAAY,CAACD,KAAK;EAAA,EAAC;EACrE,sBAAoDL,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/DC,kBAAkB;IAAEC,qBAAqB;EAEhD,IAAMC,eAAe,GAAG,SAAlBA,eAAe,CAAIP,SAAS,EAAEG,YAAY,EAAK;IACjD,IAAMK,uBAAuB,GAAGL,YAAY,CAACM,MAAM,CAAC,UAACC,aAAa,EAAEC,WAAW,EAAK;MAChFD,aAAa,CAACC,WAAW,CAACC,WAAW,CAAC,GAAGD,WAAW;MACpD,OAAOD,aAAa;IACxB,CAAC,EAAE,CAAC,CAAC,CAAC;IACN,OAAOV,SAAS,CAACa,GAAG,CAAC,UAACC,QAAQ;MAAA,uCACvBA,QAAQ;QACXH,WAAW,EAAEH,uBAAuB,CAACM,QAAQ,CAACC,EAAE;MAAC;IAAA,CACnD,CAAC;EACP,CAAC;EAED,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuB,CAAIC,wBAAwB,EAAK;IAC1D,OAAOA,wBAAwB,CAACR,MAAM,CAAC,UAACS,GAAG,EAAEJ,QAAQ,EAAK;MACtD,IAAIA,QAAQ,CAACH,WAAW,EAAE;QACtB,IAAMQ,aAAa,GAAIL,QAAQ,CAACM,OAAO,GAAIN,QAAQ,CAACO,SAAS,GAAG,EAAG,IAAKP,QAAQ,CAACQ,SAAS,GAAIR,QAAQ,CAACS,WAAW,GAAG,EAAG,CAAC;QACzH,OAAOL,GAAG,GAAGC,aAAa;MAC9B;MACA,OAAOD,GAAG;IACd,CAAC,EAAE,CAAC,CAAC;EACT,CAAC;EAEDrB,KAAK,CAAC2B,SAAS,CAAC,YAAM;IAClB,IAAIxB,SAAS,IAAIG,YAAY,EAAE;MAC3BG,qBAAqB,CACjBC,eAAe,CAACP,SAAS,EAAEG,YAAY,CAAC,CAC3C;IACL;EACJ,CAAC,EAAE,CAACH,SAAS,EAAEG,YAAY,CAAC,CAAC;EAE7B,OAAO;IAAEe,GAAG,EAAEb,kBAAkB,GAAGW,uBAAuB,CAACX,kBAAkB,CAAC,GAAG;EAAE,CAAC;AACxF,CAAC"},"metadata":{},"sourceType":"module"}